var api_key="API_KEY_HERE",timeout,weather_types={Sunny:[113],PartlyCloudy:[116],Cloudy:[119,122],Foggy:[143,248,260],ScatteredShowers:[176,185,263,293,299],Rainy:[266,281,284,296,302,305,308,311,314,317,320,353,356,359,362,365],Snowy:[179,182,227,230,323,326,329,332,335,338,368,371],Hail:[350,374,377],Thundery:[200,386,389,392,395]},addEvent=function(){return document.addEventListener?function(a,d,b){if(a&&a.nodeName||a===window)a.addEventListener(d,b,!1);else if(a&&a.length)for(var e=
0;e<a.length;e++)addEvent(a[e],d,b)}:function(a,d,b){if(a&&a.nodeName||a===window)a.attachEvent("on"+d,function(){return b.call(a,window.event)});else if(a&&a.length)for(var e=0;e<a.length;e++)addEvent(a[e],d,b)}}(),JSONP=function(){var a=0,d,b=this,e={};return{get:function(m,g,r,j){var l=-1===(m||"").indexOf("?")?"?":"&",k;j=j||e.callbackName||"callback";var h=j+"_json"+ ++a;g=g||{};for(k in g)g.hasOwnProperty(k)&&(l+=encodeURIComponent(k)+"="+encodeURIComponent(g[k])+"&");b[h]=function(a){r(a);
try{delete b[h]}catch(d){}b[h]=null};var n=m+l+j+"="+h,f=document.createElement("script"),p=!1;f.src=n;f.async=!0;var q=e.error;"function"===typeof q&&(f.onerror=function(a){q({url:n,event:a})});f.onload=f.onreadystatechange=function(){if(!p&&(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState))p=!0,f.onload=f.onreadystatechange=null,f&&f.parentNode&&f.parentNode.removeChild(f)};d||(d=document.getElementsByTagName("head")[0]);d.appendChild(f);return h},init:function(a){e=a}}}(),
wrap=function(a,d,b){var e="<"+a;if(b)for(opt in b)e+=" "+opt+'="'+b[opt]+'"';return e+(">"+d+"</"+a+">")},message=function(a){document.getElementById("forecast").innerHTML=a};
(function(){var a=0,d=document.createElement("span");d.className="support";d.innerHTML="Loading";document.getElementsByTagName("body")[0].appendChild(d);var b=setInterval(function(){100>d.offsetWidth?(clearInterval(b),document.getElementsByTagName("html")[0].className=""):10<=++a&&(clearInterval(b),document.getElementsByTagName("html")[0].className="no-liga")},50)})();
(function(){window.applicationCache.addEventListener("updateready",function(){window.applicationCache.swapCache();window.location.reload()},!1)})();
if("geolocation"in navigator&&"querySelector"in document){var get_location=function(){message(wrap("p","Trying to find you&hellip;")+wrap("h1","Loading",{"class":"loading"}));navigator.geolocation.getCurrentPosition(forecast,location_error)},location_error=function(a){1==a.code?message(wrap("p","Oh noes! We needed your location.")):message(wrap("p","Oh noes! We couldn&rsquo;t find you.")+wrap("p",wrap("a","Try again",{href:"#","class":"retry"})))},forecast=function(a){var d=a.coords.latitude.toFixed(2);
a=a.coords.longitude.toFixed(2);var b=get_forecast_cache(d,a);b?forecast_success(b):get_forecast_ajax(d,a)},get_forecast_cache=function(a,d){if("localStorage"in window&&null!==window.localStorage){var b=localStorage.forecast;if(b&&(b=JSON.parse(b),b.expires>(new Date).getTime()&&b.lat==a&&b.lon==d))return b}return!1},set_forecast_cache=function(a,d,b){"localStorage"in window&&null!==window.localStorage&&(a.expires=(new Date).getTime()+18E5,a.lat=d,a.lon=b,localStorage.forecast=JSON.stringify(a))},
get_forecast_ajax=function(a,d){message(wrap("p","Looking at the sky&hellip;")+wrap("h1","Loading",{"class":"loading"}));JSONP.get("http://free.worldweatheronline.com/feed/weather.ashx",{key:api_key,date:date_tomorrow(),cc:"no",q:a+","+d,format:"json"},function(b){b.data.error?forecast_error():(set_forecast_cache(b,a,d),forecast_success(b,a,d))});timeout=setTimeout(function(){forecast_error()},5E3)},forecast_success=function(a){clearTimeout(timeout);var d=forecast_lookup(a.data.weather[0].weatherCode);
d||(d=a.data.weather[0].weatherDesc[0].value);message(wrap("p","Tomorrow&rsquo;s forecast is")+wrap("h1",d))},forecast_error=function(){message(wrap("p","Don&rsquo;t panic, but we couldn&rsquo;t find any weather right now.")+wrap("p",wrap("a","Try again",{href:"#","class":"retry"})))},forecast_lookup=function(a){for(type in weather_types)for(c in weather_types[type])if(a==weather_types[type][c])return type},date_tomorrow=function(){var a=new Date((new Date).getTime()+864E5),d=a.getFullYear().toString(),
b=(a.getMonth()+1).toString(),a=a.getDate().toString();return d+"-"+(b[1]?b:"0"+b[0])+"-"+(a[1]?a:"0"+a[0])};addEvent(document.getElementsByTagName("body")[0],"click",function(a){-1!==a.target.className.indexOf("retry")&&(get_location(),a.preventDefault())});get_location()}else message(wrap("p","Drat. We can&rsquo;t find you.")+wrap("p",'You might need a <a href="http://www.google.com/chrome">modern browser</a>'));